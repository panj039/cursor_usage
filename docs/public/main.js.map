{
  "version": 3,
  "sources": ["../src/parser.ts", "../src/filters.ts", "../src/components.ts", "../src/main.ts"],
  "sourcesContent": ["export interface UsageRecord {\r\n  date: Date;\r\n  kind: string;\r\n  model: string;\r\n  maxMode: string;\r\n  inputWithCache: number;\r\n  inputNoCache: number;\r\n  cacheRead: number;\r\n  outputTokens: number;\r\n  totalTokens: number;\r\n  cost: number;\r\n}\r\n\r\ntype RawRow = Record<string, string>;\r\n\r\nexport async function readUsageFile(file: File): Promise<UsageRecord[]> {\r\n  const text = await file.text();\r\n  return parseUsageCsv(text);\r\n}\r\n\r\nexport function parseUsageCsv(text: string): UsageRecord[] {\r\n  const rows = parseCsv(text);\r\n  if (!rows.length) {\r\n    return [];\r\n  }\r\n\r\n  const header = rows[0].map((cell) => cell.trim());\r\n  const records: UsageRecord[] = [];\r\n\r\n  for (let i = 1; i < rows.length; i += 1) {\r\n    const row = rows[i];\r\n    if (row.length === 1 && row[0].trim() === \"\") {\r\n      continue;\r\n    }\r\n\r\n    const raw = mapRow(header, row);\r\n    const dateRaw = raw[\"Date\"];\r\n    if (!dateRaw) {\r\n      continue;\r\n    }\r\n\r\n    const date = new Date(dateRaw.replace(/\"/g, \"\"));\r\n    if (Number.isNaN(date.getTime())) {\r\n      continue;\r\n    }\r\n\r\n    records.push({\r\n      date,\r\n      kind: sanitize(raw[\"Kind\"]),\r\n      model: sanitize(raw[\"Model\"]),\r\n      maxMode: sanitize(raw[\"Max Mode\"]),\r\n      inputWithCache: toNumber(raw[\"Input (w/ Cache Write)\"]),\r\n      inputNoCache: toNumber(raw[\"Input (w/o Cache Write)\"]),\r\n      cacheRead: toNumber(raw[\"Cache Read\"]),\r\n      outputTokens: toNumber(raw[\"Output Tokens\"]),\r\n      totalTokens: toNumber(raw[\"Total Tokens\"]),\r\n      cost: toNumber(raw[\"Cost\"]),\r\n    });\r\n  }\r\n\r\n  return records.sort((a, b) => b.date.getTime() - a.date.getTime());\r\n}\r\n\r\nfunction sanitize(value: string | undefined): string {\r\n  if (!value) {\r\n    return \"\";\r\n  }\r\n  return value.replace(/^\"+|\"+$/g, \"\");\r\n}\r\n\r\nfunction toNumber(value: string | undefined): number {\r\n  if (!value) {\r\n    return 0;\r\n  }\r\n  const cleaned = value.replace(/\"/g, \"\").trim();\r\n  const parsed = Number(cleaned);\r\n  if (Number.isNaN(parsed)) {\r\n    return 0;\r\n  }\r\n  return parsed;\r\n}\r\n\r\nfunction mapRow(header: string[], row: string[]): RawRow {\r\n  const mapped: RawRow = {};\r\n  for (let i = 0; i < header.length; i += 1) {\r\n    const key = header[i] ?? `${i}`;\r\n    mapped[key] = row[i] ?? \"\";\r\n  }\r\n  return mapped;\r\n}\r\n\r\nfunction parseCsv(text: string): string[][] {\r\n  const rows: string[][] = [];\r\n  let currentRow: string[] = [];\r\n  let currentValue = \"\";\r\n  let insideQuotes = false;\r\n\r\n  for (let i = 0; i < text.length; i += 1) {\r\n    const char = text[i];\r\n    const next = text[i + 1];\r\n\r\n    if (char === '\"') {\r\n      if (insideQuotes && next === '\"') {\r\n        currentValue += '\"';\r\n        i += 1;\r\n      } else {\r\n        insideQuotes = !insideQuotes;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (char === \",\" && !insideQuotes) {\r\n      currentRow.push(currentValue);\r\n      currentValue = \"\";\r\n      continue;\r\n    }\r\n\r\n    if ((char === \"\\n\" || char === \"\\r\") && !insideQuotes) {\r\n      if (char === \"\\r\" && next === \"\\n\") {\r\n        i += 1;\r\n      }\r\n      currentRow.push(currentValue);\r\n      rows.push(currentRow);\r\n      currentRow = [];\r\n      currentValue = \"\";\r\n      continue;\r\n    }\r\n\r\n    currentValue += char;\r\n  }\r\n\r\n  if (currentValue.length || currentRow.length) {\r\n    currentRow.push(currentValue);\r\n    rows.push(currentRow);\r\n  }\r\n\r\n  return rows;\r\n}\r\n\r\n", "import { UsageRecord } from \"./parser\";\r\n\r\nexport interface DateRange {\r\n  start?: Date;\r\n  end?: Date;\r\n}\r\n\r\nexport interface QuickRangeOption {\r\n  key: string;\r\n  label: string;\r\n  start: Date;\r\n  end: Date;\r\n}\r\n\r\nexport interface QuickRanges {\r\n  days: QuickRangeOption[];\r\n  months: QuickRangeOption[];\r\n}\r\n\r\nexport function applyDateRange(records: UsageRecord[], range: DateRange): UsageRecord[] {\r\n  if (!range.start && !range.end) {\r\n    return records;\r\n  }\r\n\r\n  const startTime = range.start?.getTime();\r\n  const endTime = range.end?.getTime();\r\n\r\n  return records.filter((record) => {\r\n    const recordTime = record.date.getTime();\r\n    if (startTime !== undefined && recordTime < startTime) {\r\n      return false;\r\n    }\r\n    if (endTime !== undefined && recordTime > endTime) {\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n}\r\n\r\nexport function normalizeRange(range: DateRange): DateRange {\r\n  const { start, end } = range;\r\n  if (start && end && start.getTime() > end.getTime()) {\r\n    return { start: end, end: start };\r\n  }\r\n  return range;\r\n}\r\n\r\nexport function buildQuickRanges(records: UsageRecord[]): QuickRanges {\r\n  const dayMap = new Map<string, QuickRangeOption>();\r\n  const monthMap = new Map<string, QuickRangeOption>();\r\n\r\n  records.forEach((record) => {\r\n    const dayKey = formatDateKey(record.date);\r\n    if (!dayMap.has(dayKey)) {\r\n      dayMap.set(dayKey, {\r\n        key: `day-${dayKey}`,\r\n        label: dayKey,\r\n        start: startOfDay(record.date),\r\n        end: endOfDay(record.date),\r\n      });\r\n    }\r\n\r\n    const monthKey = formatMonthKey(record.date);\r\n    if (!monthMap.has(monthKey)) {\r\n      const range = monthRange(record.date);\r\n      monthMap.set(monthKey, {\r\n        key: `month-${monthKey}`,\r\n        label: monthKey,\r\n        start: range.start,\r\n        end: range.end,\r\n      });\r\n    }\r\n  });\r\n\r\n  const days = Array.from(dayMap.values()).sort((a, b) => b.start.getTime() - a.start.getTime());\r\n  const months = Array.from(monthMap.values()).sort((a, b) => b.start.getTime() - a.start.getTime());\r\n\r\n  return { days, months };\r\n}\r\n\r\nexport function startOfDay(date: Date): Date {\r\n  const instance = new Date(date);\r\n  instance.setHours(0, 0, 0, 0);\r\n  return instance;\r\n}\r\n\r\nexport function endOfDay(date: Date): Date {\r\n  const instance = new Date(date);\r\n  instance.setHours(23, 59, 59, 999);\r\n  return instance;\r\n}\r\n\r\nexport function monthRange(date: Date): { start: Date; end: Date } {\r\n  const start = new Date(date);\r\n  start.setDate(1);\r\n  start.setHours(0, 0, 0, 0);\r\n\r\n  const end = new Date(start);\r\n  end.setMonth(end.getMonth() + 1);\r\n  end.setMilliseconds(end.getMilliseconds() - 1);\r\n\r\n  return { start, end };\r\n}\r\n\r\nfunction formatDateKey(date: Date): string {\r\n  return [\r\n    date.getFullYear(),\r\n    pad(date.getMonth() + 1),\r\n    pad(date.getDate()),\r\n  ].join(\"-\");\r\n}\r\n\r\nfunction formatMonthKey(date: Date): string {\r\n  return [date.getFullYear(), pad(date.getMonth() + 1)].join(\"-\");\r\n}\r\n\r\nfunction pad(value: number): string {\r\n  return value.toString().padStart(2, \"0\");\r\n}\r\n\r\n", "import { QuickRanges } from \"./filters\";\r\n\r\nexport interface PlanOption {\r\n  id: string;\r\n  label: string;\r\n  description?: string;\r\n}\r\n\r\nexport interface StatCard {\r\n  label: string;\r\n  value: string;\r\n  hint?: string;\r\n}\r\n\r\nexport interface DailyRow {\r\n  key: string;\r\n  label: string;\r\n  requests: string;\r\n  requestsPercentLabel: string;\r\n  requestsPercentValue: number;\r\n  totalTokens: string;\r\n  tokensPercentLabel: string;\r\n  tokensPercentValue: number;\r\n  cost: string;\r\n  costPercentLabel: string;\r\n  costPercentValue: number;\r\n}\r\n\r\nexport interface ModelChip {\r\n  value: string;\r\n  label: string;\r\n  active: boolean;\r\n  color: string;\r\n}\r\n\r\nexport interface ModelChartSegment {\r\n  label: string;\r\n  percentLabel: string;\r\n  percentValue: number;\r\n  color: string;\r\n  valueLabel: string;\r\n}\r\n\r\nexport interface ModelChartMetric {\r\n  key: string;\r\n  label: string;\r\n  totalLabel: string;\r\n  empty: boolean;\r\n  segments: ModelChartSegment[];\r\n  gradient: string;\r\n}\r\n\r\nexport interface ModelLegendItem {\r\n  label: string;\r\n  color: string;\r\n}\r\n\r\nexport interface FilterValues {\r\n  startDate: string;\r\n  startTime: string;\r\n  endDate: string;\r\n  endTime: string;\r\n}\r\n\r\nexport interface QuickRangeView {\r\n  days: QuickRangeViewItem[];\r\n  months: QuickRangeViewItem[];\r\n}\r\n\r\nexport interface QuickRangeViewItem {\r\n  key: string;\r\n  label: string;\r\n  active: boolean;\r\n}\r\n\r\nexport interface RenderModel {\r\n  hasData: boolean;\r\n  fileName?: string;\r\n  statusMessage: string;\r\n  planOptions: PlanOption[];\r\n  activePlan: string;\r\n  planUsagePercent: number;\r\n  planUsageLabel: string;\r\n  planUsageSummary: string;\r\n  planTokensSummary: string;\r\n  planUsageNote: string;\r\n  planUsageColor: string;\r\n  stats: StatCard[];\r\n  quickRanges: QuickRangeView;\r\n  filterValues: FilterValues;\r\n  rangeLabel: string;\r\n  showRangePopover: boolean;\r\n  dailyRows: DailyRow[];\r\n  quickRangesAvailable: boolean;\r\n  activeQuickRangeKey?: string;\r\n  floatingStyle: string;\r\n  modelChips: ModelChip[];\r\n  hasModelOptions: boolean;\r\n  hasModelData: boolean;\r\n  modelChartMetrics: ModelChartMetric[];\r\n  modelLegend: ModelLegendItem[];\r\n}\r\n\r\nexport function renderApp(model: RenderModel): string {\r\n  return `\r\n    <section class=\"panel file-panel\">\r\n      <div class=\"file-panel__actions\">\r\n        <div class=\"file-panel__left\">\r\n          <label class=\"file-input\">\r\n            <span class=\"file-input__label\">\u9009\u62E9 CSV \u6587\u4EF6</span>\r\n            <input data-role=\"file-input\" type=\"file\" accept=\".csv,text/csv\" hidden />\r\n          </label>\r\n          ${model.fileName ? `<span class=\"file-panel__filename\">\u5F53\u524D\u6587\u4EF6\uFF1A${escapeHtml(model.fileName)}</span>` : \"\"}\r\n        </div>\r\n        <a\r\n          class=\"file-panel__link\"\r\n          href=\"https://cursor.com/cn/dashboard?tab=usage\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          \u4E0B\u8F7D\u7528\u91CF CSV\r\n        </a>\r\n      </div>\r\n      <div class=\"drop-zone\" data-role=\"drop-zone\">\r\n        <p>\u5C06\u6587\u4EF6\u62D6\u62FD\u5230\u6B64\u5904\u6216\u70B9\u51FB\u4E0A\u65B9\u6309\u94AE</p>\r\n        <p class=\"hint\">\u652F\u6301 Cursor \u5BFC\u51FA\u7684\u7528\u91CF CSV \u6587\u4EF6</p>\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"panel plan-panel\">\r\n      <header class=\"panel__header\">\r\n        <h2>\u5957\u9910\u6A21\u5F0F</h2>\r\n        <a\r\n          class=\"panel__link\"\r\n          href=\"https://cursor.com/cn/dashboard?tab=billing\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          \u67E5\u770B\u8D26\u5355\u8D39\u7528\r\n        </a>\r\n      </header>\r\n      <div class=\"plan-panel__content\">\r\n        <div class=\"plan-options\">\r\n          ${model.planOptions.map((option) => renderPlanOption(option, model.activePlan)).join(\"\")}\r\n        </div>\r\n        <div class=\"plan-usage\">\r\n          <div class=\"plan-usage__ring\" style=\"--progress: ${model.planUsagePercent.toFixed(\r\n            2,\r\n          )}; --ring-color: ${model.planUsageColor}\">\r\n            <div class=\"plan-usage__ring-inner\">\r\n              <span class=\"plan-usage__percent\">${model.planUsageLabel}</span>\r\n              <span class=\"plan-usage__caption\">\u5DF2\u4F7F\u7528</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"plan-usage__details\">\r\n            <p>${escapeHtml(model.planUsageSummary)}</p>\r\n            <p class=\"plan-usage__tokens\">${escapeHtml(model.planTokensSummary)}</p>\r\n            <p class=\"plan-usage__note\">${escapeHtml(model.planUsageNote)}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"panel model-panel\">\r\n      <header class=\"panel__header\">\r\n        <h2>\u6A21\u578B\u7B5B\u9009</h2>\r\n        ${\r\n          model.hasModelOptions\r\n            ? `<button class=\"link-button\" data-action=\"model-all\">\u5168\u9009</button>`\r\n            : \"\"\r\n        }\r\n      </header>\r\n      ${\r\n        model.hasModelOptions\r\n          ? `\r\n              <div class=\"model-panel__chips\">\r\n                ${model.modelChips.map((chip) => renderModelChip(chip)).join(\"\")}\r\n              </div>\r\n            `\r\n          : `<p class=\"panel__hint\">\u5BFC\u5165 CSV \u540E\u53EF\u6309\u7167\u6A21\u578B\u7B5B\u9009\u3002</p>`\r\n      }\r\n      ${\r\n        model.hasModelData\r\n          ? renderModelChart(model.modelChartMetrics, model.modelLegend)\r\n          : model.hasModelOptions\r\n            ? `<p class=\"panel__empty\">\u5F53\u524D\u7B5B\u9009\u6761\u4EF6\u4E0B\u6682\u65E0\u6A21\u578B\u6570\u636E\u3002</p>`\r\n            : \"\"\r\n      }\r\n    </section>\r\n\r\n    <div class=\"floating-time\" data-role=\"floating-time\" style=\"${model.floatingStyle}\">\r\n      <div class=\"time-toolbar\">\r\n        <button class=\"time-badge\" data-action=\"toggle-range\" aria-expanded=\"${model.showRangePopover ? \"true\" : \"false\"}\" title=\"Shift+\u62D6\u52A8\u53EF\u79FB\u52A8\u4F4D\u7F6E\">\r\n          <span class=\"time-badge__icon\">\uD83D\uDD52</span>\r\n          <span class=\"time-badge__label\">${escapeHtml(model.rangeLabel)}</span>\r\n        </button>\r\n        <button class=\"link-button\" data-action=\"clear-range\" title=\"\u6E05\u7A7A\u7B5B\u9009\">\u6E05\u7A7A</button>\r\n      </div>\r\n      <div class=\"range-popover${model.showRangePopover ? \" range-popover--open\" : \"\"}\" data-role=\"range-popover\">\r\n        <div class=\"range-popover__section\">\r\n          <div class=\"range-popover__title\">\u5FEB\u901F\u9009\u62E9</div>\r\n          <div class=\"range-popover__grid\">\r\n            ${[\r\n              [\"last-24h\", \"\u6700\u8FD124\u5C0F\u65F6\"],\r\n              [\"last-3d\", \"\u6700\u8FD13\u5929\"],\r\n              [\"last-7d\", \"\u6700\u8FD17\u5929\"],\r\n              [\"last-30d\", \"\u6700\u8FD130\u5929\"],\r\n              [\"this-month\", \"\u672C\u6708\"],\r\n              [\"prev-month\", \"\u4E0A\u6708\"],\r\n            ]\r\n              .map(\r\n                ([key, label]) =>\r\n                  `<button class=\"quick-range\" data-action=\"preset\" data-preset=\"${key}\">${label}</button>`,\r\n              )\r\n              .join(\"\")}\r\n          </div>\r\n        </div>\r\n        <div class=\"range-popover__section\">\r\n          <div class=\"range-popover__title\">\u81EA\u5B9A\u4E49</div>\r\n          <div class=\"custom-range\">\r\n            <label>\r\n              <span>\u5F00\u59CB</span>\r\n              <div class=\"custom-range__row\">\r\n                <input type=\"date\" data-filter=\"start-date\" value=\"${model.filterValues.startDate}\" />\r\n                <input type=\"time\" data-filter=\"start-time\" value=\"${model.filterValues.startTime}\" step=\"60\" />\r\n              </div>\r\n            </label>\r\n            <label>\r\n              <span>\u7ED3\u675F</span>\r\n              <div class=\"custom-range__row\">\r\n                <input type=\"date\" data-filter=\"end-date\" value=\"${model.filterValues.endDate}\" />\r\n                <input type=\"time\" data-filter=\"end-time\" value=\"${model.filterValues.endTime}\" step=\"60\" />\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <section class=\"panel stats-panel\">\r\n      <header class=\"panel__header\">\r\n        <h2>\u7EDF\u8BA1\u4FE1\u606F</h2>\r\n      </header>\r\n      <div class=\"stats-panel__content\">\r\n        ${\r\n          model.hasData\r\n            ? `\r\n              <div class=\"stat-grid\">\r\n                ${model.stats.map((stat) => renderStatCard(stat)).join(\"\")}\r\n              </div>\r\n            `\r\n            : `<p class=\"panel__empty\">${escapeHtml(model.statusMessage)}</p>`\r\n        }\r\n      </div>\r\n    </section>\r\n\r\n    ${\r\n      model.hasData\r\n        ? `\r\n            <section class=\"panel table-panel\">\r\n              <header class=\"panel__header\">\r\n                <h2>\u6309\u5929\u6C47\u603B</h2>\r\n              </header>\r\n              <div class=\"table-wrapper\">\r\n                <table>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>\u65E5\u671F</th>\r\n                      <th>\u8C03\u7528\u6B21\u6570</th>\r\n                      <th>Total Tokens</th>\r\n                      <th>\u8D39\u7528 (USD)</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    ${\r\n                      model.dailyRows.length\r\n                        ? model.dailyRows\r\n                            .map(\r\n                              (row) => `\r\n                                <tr>\r\n                                  <td>${escapeHtml(row.label)}</td>\r\n                                  <td>${renderValueCell(row.requests, row.requestsPercentLabel, row.requestsPercentValue)}</td>\r\n                                  <td>${renderValueCell(row.totalTokens, row.tokensPercentLabel, row.tokensPercentValue)}</td>\r\n                                  <td>${renderValueCell(row.cost, row.costPercentLabel, row.costPercentValue)}</td>\r\n                                </tr>\r\n                              `,\r\n                            )\r\n                            .join(\"\")\r\n                        : `<tr><td colspan=\"4\" class=\"panel__empty\">\u5F53\u524D\u7B5B\u9009\u4E0B\u6682\u65E0\u6570\u636E</td></tr>`\r\n                    }\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </section>\r\n          `\r\n        : \"\"\r\n    }\r\n  `;\r\n}\r\n\r\nfunction renderPlanOption(option: PlanOption, activePlan: string): string {\r\n  const isActive = option.id === activePlan;\r\n  return `\r\n    <button\r\n      class=\"plan-option${isActive ? \" plan-option--active\" : \"\"}\"\r\n      data-action=\"plan\"\r\n      data-plan=\"${option.id}\"\r\n      type=\"button\"\r\n    >\r\n      <span class=\"plan-option__label\">${escapeHtml(option.label)}</span>\r\n      ${option.description ? `<span class=\"plan-option__desc\">${escapeHtml(option.description)}</span>` : \"\"}\r\n    </button>\r\n  `;\r\n}\r\n\r\nfunction renderQuickRange(item: QuickRangeViewItem): string {\r\n  return `\r\n    <button\r\n      class=\"quick-range${item.active ? \" quick-range--active\" : \"\"}\"\r\n      data-action=\"range\"\r\n      data-range-key=\"${item.key}\"\r\n      type=\"button\"\r\n    >\r\n      ${escapeHtml(item.label)}\r\n    </button>\r\n  `;\r\n}\r\n\r\nfunction renderStatCard(stat: StatCard): string {\r\n  return `\r\n    <article class=\"stat-card\">\r\n      <h3>${escapeHtml(stat.label)}</h3>\r\n      <p class=\"stat-card__value\">${escapeHtml(stat.value)}</p>\r\n      ${stat.hint ? `<p class=\"stat-card__hint\">${escapeHtml(stat.hint)}</p>` : \"\"}\r\n    </article>\r\n  `;\r\n}\r\n\r\nfunction renderValueCell(value: string, percentLabel: string, percentValue: number): string {\r\n  return `\r\n    <div class=\"value-cell\">\r\n      <div class=\"value-cell__meta\">\r\n        <span class=\"value-cell__value\">${escapeHtml(value)}</span>\r\n        <span class=\"value-cell__percent\">${escapeHtml(percentLabel)}</span>\r\n      </div>\r\n      <div class=\"value-cell__bar\">\r\n        <span style=\"width:${percentValue.toFixed(2)}%\"></span>\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\nfunction renderModelChip(chip: ModelChip): string {\r\n  const classes = `model-chip${chip.active ? \" model-chip--active\" : \"\"}`;\r\n  return `\r\n    <button\r\n      class=\"${classes}\"\r\n      data-action=\"model-toggle\"\r\n      data-model=\"${escapeHtml(chip.value)}\"\r\n      type=\"button\"\r\n    >\r\n      <span class=\"model-chip__dot\" style=\"--dot-color:${chip.color}\"></span>\r\n      <span class=\"model-chip__label\">${escapeHtml(chip.label)}</span>\r\n    </button>\r\n  `;\r\n}\r\n\r\nfunction renderModelChart(metrics: ModelChartMetric[], legend: ModelLegendItem[]): string {\r\n  return `\r\n    <div class=\"model-chart\">\r\n      <div class=\"model-chart__legend\">\r\n        ${legend.map((item) => renderLegendItem(item)).join(\"\")}\r\n      </div>\r\n      <div class=\"model-chart__row\">\r\n        ${metrics.map((metric) => renderModelChartMetric(metric)).join(\"\")}\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\nfunction renderModelChartMetric(metric: ModelChartMetric): string {\r\n  return `\r\n    <section class=\"model-chart__card\">\r\n      <header class=\"model-chart__card-header\">\r\n        <span>${escapeHtml(metric.label)}</span>\r\n        <span class=\"model-chart__metric-total\">${escapeHtml(metric.totalLabel)}</span>\r\n      </header>\r\n      ${\r\n        metric.empty\r\n          ? `<div class=\"model-chart__card-empty\">\u6682\u65E0\u6570\u636E</div>`\r\n          : `\r\n            <div class=\"model-chart__card-body\">\r\n              <div class=\"model-chart__pie\" style=\"--pie-gradient:${metric.gradient}\">\r\n                <span class=\"model-chart__pie-total\">${escapeHtml(metric.totalLabel)}</span>\r\n              </div>\r\n              <div class=\"model-chart__segment-list\">\r\n                ${metric.segments\r\n                  .map(\r\n                    (segment) => `\r\n                      <div class=\"model-chart__segment-row\">\r\n                        <span class=\"model-chart__segment-dot\" style=\"--segment-color:${segment.color}\"></span>\r\n                        <span class=\"model-chart__segment-text\">\r\n                          <span class=\"model-chart__segment-label\">${escapeHtml(segment.label)}</span>\r\n                          <span class=\"model-chart__segment-meta\">${escapeHtml(segment.valueLabel)} \u00B7 ${escapeHtml(segment.percentLabel)}</span>\r\n                        </span>\r\n                      </div>\r\n                    `,\r\n                  )\r\n                  .join(\"\")}\r\n              </div>\r\n            </div>\r\n          `\r\n      }\r\n    </section>\r\n  `;\r\n}\r\n\r\nfunction renderLegendItem(item: ModelLegendItem): string {\r\n  return `\r\n    <span class=\"model-chart__legend-item\">\r\n      <span class=\"model-chart__legend-dot\" style=\"--dot-color:${item.color}\"></span>\r\n      <span>${escapeHtml(item.label)}</span>\r\n    </span>\r\n  `;\r\n}\r\n\r\nfunction escapeHtml(value: string): string {\r\n  return value\r\n    .replace(/&/g, \"&amp;\")\r\n    .replace(/</g, \"&lt;\")\r\n    .replace(/>/g, \"&gt;\")\r\n    .replace(/\"/g, \"&quot;\")\r\n    .replace(/'/g, \"&#039;\");\r\n}\r\n\r\n", "import { readUsageFile, UsageRecord } from \"./parser\";\r\nimport { applyDateRange, buildQuickRanges, DateRange, QuickRanges, normalizeRange } from \"./filters\";\r\nimport {\r\n  DailyRow,\r\n  ModelChartMetric,\r\n  ModelChartSegment,\r\n  ModelChip,\r\n  ModelLegendItem,\r\n  PlanOption,\r\n  renderApp,\r\n  StatCard,\r\n} from \"./components\";\r\n\r\ntype PlanId = keyof typeof PLAN_CONFIG;\r\n\r\ninterface FilterInputs {\r\n  startDate?: string;\r\n  startTime?: string;\r\n  endDate?: string;\r\n  endTime?: string;\r\n}\r\n\r\ninterface AppState {\r\n  records: UsageRecord[];\r\n  filter: FilterInputs;\r\n  plan: PlanId;\r\n  activeQuickRangeKey?: string;\r\n  fileName?: string;\r\n  rangePopoverOpen: boolean;\r\n  models: string[];\r\n  selectedModels: string[];\r\n  floatingPos?: { left: number; top: number };\r\n  dragging?: { offsetX: number; offsetY: number };\r\n}\r\n\r\ninterface SummaryResult {\r\n  stats: StatCard[];\r\n  dailyRows: DailyRow[];\r\n  totalTokens: number;\r\n  totalCost: number;\r\n  totalRequests: number;\r\n  modelMetrics: ModelMetric[];\r\n}\r\n\r\ninterface ModelMetric {\r\n  model: string;\r\n  requests: number;\r\n  tokens: number;\r\n  cost: number;\r\n}\r\n\r\nconst PLAN_CONFIG = {\r\n  free: {\r\n    label: \"Free\",\r\n    description: \"\u57FA\u7840\u7248\u672C\uFF0C\u9002\u7528\u4E8E\u65E5\u5E38\u8F7B\u91CF\u4F7F\u7528\",\r\n    tokenLimit: 500_000,\r\n  },\r\n  pro: {\r\n    label: \"Pro\",\r\n    description: \"\u4E13\u4E1A\u7248\uFF0C\u7EA6 1,000 \u4E07 tokens/\u6708\",\r\n    tokenLimit: 10_000_000,\r\n  },\r\n  proPlus: {\r\n    label: \"ProPlus\",\r\n    description: \"\u8FDB\u9636\u7248\uFF0C\u7EA6 3,000 \u4E07 tokens/\u6708\",\r\n    tokenLimit: 30_000_000,\r\n  },\r\n  ultra: {\r\n    label: \"Ultra\",\r\n    description: \"\u65D7\u8230\u7248\uFF0C\u7EA6 1 \u4EBF tokens/\u6708\",\r\n    tokenLimit: 100_000_000,\r\n  },\r\n} as const;\r\n\r\nconst PLAN_USAGE_NOTE =\r\n  \"\u5957\u9910\u7528\u91CF\u4EC5\u4F9B\u53C2\u8003\uFF0C\u5B9E\u9645\u9650\u989D\u4E0E\u670D\u52A1\u72B6\u6001\u4EE5 Cursor \u8D26\u6237\u63D0\u793A\u4E3A\u51C6\uFF0C\u8F6F\u9608\u503C\u53EF\u80FD\u5141\u8BB8\u7EE7\u7EED\u4F7F\u7528\u5E76\u6309\u653F\u7B56\u8BA1\u8D39\u3002\";\r\n\r\nconst numberFormatter = new Intl.NumberFormat(\"zh-CN\");\r\nconst costFormatter = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"currency\",\r\n  currency: \"USD\",\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nconst state: AppState = {\r\n  records: [],\r\n  filter: {},\r\n  plan: \"pro\",\r\n  activeQuickRangeKey: undefined,\r\n  fileName: undefined,\r\n  rangePopoverOpen: false,\r\n  models: [],\r\n  selectedModels: [],\r\n};\r\n\r\nconst rootQuery = document.querySelector<HTMLElement>(\"[data-view-root]\");\r\n\r\nif (!rootQuery) {\r\n  throw new Error(\"\u65E0\u6CD5\u627E\u5230\u5E94\u7528\u5BB9\u5668\");\r\n}\r\n\r\nconst root: HTMLElement = rootQuery;\r\n\r\ninit();\r\n\r\nfunction init(): void {\r\n  bindGlobalDragGuards();\r\n  render();\r\n  bindDelegatedEvents();\r\n  bindDropEvents();\r\n  bindFloatingDragEvents();\r\n  bindOutsidePopoverClose();\r\n  window.addEventListener(\"resize\", handleResizeForFloating);\r\n}\r\n\r\nfunction bindGlobalDragGuards(): void {\r\n  const guard = (event: DragEvent): void => {\r\n    if (!event.dataTransfer) {\r\n      return;\r\n    }\r\n    if (event.dataTransfer.types.includes(\"Files\")) {\r\n      event.preventDefault();\r\n    }\r\n  };\r\n  window.addEventListener(\"dragover\", guard, { capture: true });\r\n  window.addEventListener(\"drop\", guard, { capture: true });\r\n}\r\n\r\nfunction bindDelegatedEvents(): void {\r\n  root.addEventListener(\"click\", (event) => {\r\n    const target = event.target as HTMLElement | null;\r\n    if (!target) {\r\n      return;\r\n    }\r\n    // close popover when clicking outside\r\n    const withinPopover =\r\n      Boolean(target.closest(\"[data-role='range-popover']\")) ||\r\n      Boolean(target.closest(\"[data-action='toggle-range']\"));\r\n    if (state.rangePopoverOpen && !withinPopover) {\r\n      state.rangePopoverOpen = false;\r\n      queueMicrotask(() => {\r\n        if (!state.rangePopoverOpen) {\r\n          render();\r\n        }\r\n      });\r\n    }\r\n\r\n    const planElement = target.closest<HTMLElement>(\"[data-action='plan']\");\r\n    if (planElement?.dataset.plan) {\r\n      event.preventDefault();\r\n      handlePlanChange(planElement.dataset.plan as PlanId);\r\n      return;\r\n    }\r\n\r\n    const toggleRange = target.closest<HTMLElement>(\"[data-action='toggle-range']\");\r\n    if (toggleRange) {\r\n      event.preventDefault();\r\n      state.rangePopoverOpen = !state.rangePopoverOpen;\r\n      render();\r\n      return;\r\n    }\r\n\r\n    const modelToggle = target.closest<HTMLElement>(\"[data-action='model-toggle']\");\r\n    if (modelToggle?.dataset.model) {\r\n      event.preventDefault();\r\n      handleModelToggle(modelToggle.dataset.model);\r\n      return;\r\n    }\r\n\r\n    const modelAll = target.closest<HTMLElement>(\"[data-action='model-all']\");\r\n    if (modelAll) {\r\n      event.preventDefault();\r\n      handleModelSelectAll();\r\n      return;\r\n    }\r\n\r\n    const preset = target.closest<HTMLElement>(\"[data-action='preset']\");\r\n    if (preset?.dataset.preset) {\r\n      event.preventDefault();\r\n      applyPresetRange(preset.dataset.preset);\r\n      return;\r\n    }\r\n\r\n    const rangeElement = target.closest<HTMLElement>(\"[data-action='range']\");\r\n    if (rangeElement?.dataset.rangeKey) {\r\n      event.preventDefault();\r\n      handleQuickRange(rangeElement.dataset.rangeKey);\r\n      return;\r\n    }\r\n\r\n    const clearRange = target.closest<HTMLElement>(\"[data-action='clear-range']\");\r\n    if (clearRange) {\r\n      event.preventDefault();\r\n      clearFilters();\r\n      return;\r\n    }\r\n  });\r\n\r\n  root.addEventListener(\"input\", (event) => {\r\n    const target = event.target as HTMLInputElement | null;\r\n    if (!target || !target.dataset.filter) {\r\n      return;\r\n    }\r\n\r\n    handleFilterInput(target.dataset.filter, target.value);\r\n  });\r\n\r\n  root.addEventListener(\"change\", (event) => {\r\n    const input = event.target as HTMLInputElement | null;\r\n    if (!input) {\r\n      return;\r\n    }\r\n\r\n    if (input.dataset.role === \"file-input\" && input.files?.length) {\r\n      handleFiles(Array.from(input.files));\r\n      input.value = \"\";\r\n    }\r\n  });\r\n}\r\n\r\nfunction bindDropEvents(): void {\r\n  const getDropZone = (): HTMLElement | null => root.querySelector(\"[data-role='drop-zone']\");\r\n\r\n  root.addEventListener(\"dragover\", (event) => {\r\n    if (!event.dataTransfer) {\r\n      return;\r\n    }\r\n\r\n    if (event.dataTransfer.types.includes(\"Files\")) {\r\n      event.preventDefault();\r\n      event.dataTransfer.dropEffect = \"copy\";\r\n      const zone = getDropZone();\r\n      if (zone) {\r\n        zone.classList.add(\"drop-zone--active\");\r\n      }\r\n    }\r\n  });\r\n\r\n  root.addEventListener(\"dragover\", (event) => {\r\n    if (!event.dataTransfer) {\r\n      return;\r\n    }\r\n\r\n    const zone = (event.target as HTMLElement | null)?.closest<HTMLElement>(\"[data-role='drop-zone']\");\r\n    if (zone) {\r\n      zone.classList.add(\"drop-zone--active\");\r\n      event.dataTransfer.dropEffect = \"copy\";\r\n    }\r\n  });\r\n\r\n  root.addEventListener(\"dragleave\", (event) => {\r\n    const zone = (event.target as HTMLElement | null)?.closest<HTMLElement>(\"[data-role='drop-zone']\") ?? getDropZone();\r\n    if (zone && !zone.contains(event.relatedTarget as Node | null)) {\r\n      zone.classList.remove(\"drop-zone--active\");\r\n    }\r\n  });\r\n\r\n  root.addEventListener(\"drop\", (event) => {\r\n    if (!event.dataTransfer) {\r\n      return;\r\n    }\r\n    const zone = (event.target as HTMLElement | null)?.closest<HTMLElement>(\"[data-role='drop-zone']\") ?? getDropZone();\r\n    const files = Array.from(event.dataTransfer.files).filter((file) => file.name.toLowerCase().endsWith(\".csv\"));\r\n    if (files.length) {\r\n      event.preventDefault();\r\n      if (zone) {\r\n        zone.classList.remove(\"drop-zone--active\");\r\n      }\r\n      handleFiles(files);\r\n    }\r\n  });\r\n}\r\n\r\nfunction bindFloatingDragEvents(): void {\r\n  window.addEventListener(\"mousedown\", (event) => {\r\n    const target = event.target as HTMLElement | null;\r\n    if (!target) return;\r\n    const badge = target.closest<HTMLElement>(\".time-badge\");\r\n    const container = document.querySelector<HTMLElement>(\"[data-role='floating-time']\");\r\n    if (!badge || !container) return;\r\n    if (!(event instanceof MouseEvent) || event.button !== 0) return;\r\n    if (!event.shiftKey) return; // \u4EC5\u5728\u6309\u4F4F Shift \u65F6\u5141\u8BB8\u62D6\u52A8\r\n    event.preventDefault();\r\n    const rect = container.getBoundingClientRect();\r\n    state.dragging = { offsetX: event.clientX - rect.left, offsetY: event.clientY - rect.top };\r\n    // \u5F00\u59CB\u62D6\u52A8\u65F6\u5207\u6362\u4E3A\u901A\u8FC7 left/top \u5B9A\u4F4D\r\n    state.floatingPos = { left: rect.left, top: rect.top };\r\n    applyFloatingInlineStyle(container, state.floatingPos);\r\n  });\r\n\r\n  window.addEventListener(\"mousemove\", (event) => {\r\n    if (!state.dragging) return;\r\n    const container = document.querySelector<HTMLElement>(\"[data-role='floating-time']\");\r\n    if (!container) return;\r\n    const left = Math.max(8, Math.min(window.innerWidth - 8 - container.offsetWidth, event.clientX - state.dragging.offsetX));\r\n    const top = Math.max(8, Math.min(window.innerHeight - 8 - container.offsetHeight, event.clientY - state.dragging.offsetY));\r\n    state.floatingPos = { left, top };\r\n    applyFloatingInlineStyle(container, state.floatingPos);\r\n  });\r\n\r\n  window.addEventListener(\"mouseup\", () => {\r\n    if (state.dragging) {\r\n      state.dragging = undefined;\r\n    }\r\n  });\r\n}\r\n\r\nfunction bindOutsidePopoverClose(): void {\r\n  window.addEventListener(\r\n    \"click\",\r\n    (event) => {\r\n      if (!state.rangePopoverOpen) {\r\n        return;\r\n      }\r\n      const target = event.target as HTMLElement | null;\r\n      if (!target) {\r\n        return;\r\n      }\r\n      const within =\r\n        Boolean(target.closest(\"[data-role='range-popover']\")) ||\r\n        Boolean(target.closest(\"[data-action='toggle-range']\"));\r\n      if (within) {\r\n        return;\r\n      }\r\n      state.rangePopoverOpen = false;\r\n      render();\r\n    },\r\n    false,\r\n  );\r\n}\r\n\r\nfunction applyFloatingInlineStyle(container: HTMLElement, pos?: { left: number; top: number }): void {\r\n  if (pos) {\r\n    container.style.left = `${Math.round(pos.left)}px`;\r\n    container.style.top = `${Math.round(pos.top)}px`;\r\n    container.style.right = \"auto\";\r\n    container.style.position = \"fixed\";\r\n  }\r\n}\r\n\r\nfunction handleFiles(files: File[]): void {\r\n  if (!files.length) {\r\n    return;\r\n  }\r\n  const [file] = files;\r\n  readUsageFile(file)\r\n    .then((records) => {\r\n      state.records = records;\r\n      state.fileName = file.name;\r\n      state.activeQuickRangeKey = undefined;\r\n      state.filter = {};\r\n      state.models = collectModels(records);\r\n      state.selectedModels = defaultSelectedModels(state.models);\r\n      state.rangePopoverOpen = false;\r\n      render();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"\u89E3\u6790 CSV \u65F6\u51FA\u9519\uFF1A\", error);\r\n      alert(\"\u65E0\u6CD5\u89E3\u6790\u8BE5\u6587\u4EF6\uFF0C\u8BF7\u786E\u8BA4\u5176\u4E3A\u6709\u6548\u7684 Cursor \u7528\u91CF CSV\u3002\");\r\n    });\r\n}\r\n\r\nfunction handlePlanChange(plan: PlanId): void {\r\n  if (!PLAN_CONFIG[plan]) {\r\n    return;\r\n  }\r\n  state.plan = plan;\r\n  state.rangePopoverOpen = false;\r\n  render();\r\n}\r\n\r\nfunction handleModelToggle(model: string): void {\r\n  if (!model) {\r\n    return;\r\n  }\r\n  if (!state.models.length) {\r\n    return;\r\n  }\r\n  const baseline = state.selectedModels.length ? state.selectedModels : state.models;\r\n  const selection = new Set(baseline);\r\n  if (selection.has(model)) {\r\n    selection.delete(model);\r\n  } else {\r\n    selection.add(model);\r\n  }\r\n  if (selection.size === 0) {\r\n    selection.add(model);\r\n  }\r\n  state.selectedModels = Array.from(selection);\r\n  render();\r\n}\r\n\r\nfunction handleModelSelectAll(): void {\r\n  if (!state.models.length) {\r\n    return;\r\n  }\r\n  state.selectedModels = [...state.models];\r\n  render();\r\n}\r\n\r\nfunction handleQuickRange(rangeKey: string): void {\r\n  const quickRanges = buildQuickRanges(state.records);\r\n  const allRanges = [...quickRanges.days, ...quickRanges.months];\r\n  const match = allRanges.find((item) => item.key === rangeKey);\r\n  if (!match) {\r\n    return;\r\n  }\r\n\r\n  state.filter = {\r\n    startDate: toDateInput(match.start),\r\n    startTime: toTimeInput(match.start),\r\n    endDate: toDateInput(match.end),\r\n    endTime: toTimeInput(match.end),\r\n  };\r\n  state.activeQuickRangeKey = match.key;\r\n  state.rangePopoverOpen = false;\r\n  render();\r\n}\r\n\r\nfunction handleFilterInput(key: string, value: string): void {\r\n  if (![\"start-date\", \"start-time\", \"end-date\", \"end-time\"].includes(key)) {\r\n    return;\r\n  }\r\n\r\n  if (value === \"\") {\r\n    delete (state.filter as Record<string, string | undefined>)[normalizeFilterKey(key)];\r\n  } else {\r\n    const normalizedKey = normalizeFilterKey(key);\r\n    (state.filter as Record<string, string | undefined>)[normalizedKey] = value;\r\n  }\r\n\r\n  state.activeQuickRangeKey = undefined;\r\n  render();\r\n}\r\n\r\nfunction normalizeFilterKey(key: string): keyof FilterInputs {\r\n  switch (key) {\r\n    case \"start-date\":\r\n      return \"startDate\";\r\n    case \"start-time\":\r\n      return \"startTime\";\r\n    case \"end-date\":\r\n      return \"endDate\";\r\n    case \"end-time\":\r\n      return \"endTime\";\r\n    default:\r\n      return \"startDate\";\r\n  }\r\n}\r\n\r\nfunction clearFilters(): void {\r\n  if (!hasFilter(state.filter)) {\r\n    return;\r\n  }\r\n  state.filter = {};\r\n  state.activeQuickRangeKey = undefined;\r\n  state.rangePopoverOpen = false;\r\n  render();\r\n}\r\n\r\nfunction hasFilter(filter: FilterInputs): boolean {\r\n  return Boolean(filter.startDate || filter.startTime || filter.endDate || filter.endTime);\r\n}\r\n\r\nfunction render(): void {\r\n  const dateRange = normalizeRange(toDateRange(state.filter));\r\n  const planConfig = PLAN_CONFIG[state.plan];\r\n  const dateFiltered = applyDateRange(state.records, dateRange);\r\n  const modelsAll = state.models;\r\n  const selectedModels = state.selectedModels.length ? state.selectedModels : modelsAll;\r\n  const modelColors = buildModelColorMap(modelsAll);\r\n  const filteredRecords = applyModelFilter(dateFiltered, selectedModels.length ? selectedModels : modelsAll);\r\n  const summary = summarize(filteredRecords);\r\n  const modelLegend = buildModelLegend(summary.modelMetrics, modelColors);\r\n  const modelChartMetrics = buildModelChartMetrics(summary, modelColors);\r\n  const modelChips = buildModelChips(modelsAll, selectedModels, modelColors);\r\n  const quickRanges = buildQuickRanges(state.records);\r\n\r\n  const percent = computeUsagePercent(summary.totalTokens, planConfig.tokenLimit);\r\n  const percentLabel = formatPercentLabel(percent);\r\n  const statusMessage = state.records.length\r\n    ? \"\u5F53\u524D\u7B5B\u9009\u6761\u4EF6\u4E0B\u6682\u65E0\u6570\u636E\uFF0C\u8BF7\u5C1D\u8BD5\u5176\u4ED6\u65F6\u95F4\u8303\u56F4\u3002\"\r\n    : \"\u8BF7\u9009\u62E9\u6216\u62D6\u5165 CSV \u6587\u4EF6\u4EE5\u67E5\u770B\u7528\u91CF\u7EDF\u8BA1\u3002\";\r\n\r\n  const renderModel = {\r\n    hasData: filteredRecords.length > 0,\r\n    fileName: state.fileName,\r\n    statusMessage,\r\n    planOptions: toPlanOptions(),\r\n    activePlan: state.plan,\r\n    planUsagePercent: percent,\r\n    planUsageLabel: percentLabel,\r\n    planUsageNote: PLAN_USAGE_NOTE,\r\n    planUsageColor: usageColor(percent),\r\n    planUsageSummary: `${planConfig.label} \u5957\u9910\u5DF2\u4F7F\u7528 ${formatNumber(summary.totalTokens)} tokens\uFF0C\u5360\u6BD4 ${percentLabel}`,\r\n    planTokensSummary: `${formatNumber(summary.totalTokens)} / ${formatNumber(planConfig.tokenLimit)} tokens`,\r\n    stats: summary.stats,\r\n    quickRanges: toQuickRangeView(quickRanges, state.activeQuickRangeKey),\r\n    filterValues: toFilterValues(state.filter),\r\n    rangeLabel: currentRangeLabel(dateRange),\r\n    showRangePopover: state.rangePopoverOpen,\r\n    floatingStyle: initialFloatingStyle(state.floatingPos),\r\n    dailyRows: summary.dailyRows,\r\n    quickRangesAvailable: state.records.length > 0,\r\n    activeQuickRangeKey: state.activeQuickRangeKey,\r\n    modelChips,\r\n    hasModelOptions: modelsAll.length > 0,\r\n    hasModelData: summary.modelMetrics.length > 0,\r\n    modelChartMetrics,\r\n    modelLegend,\r\n  };\r\n\r\n  root.innerHTML = renderApp(renderModel);\r\n  if (state.rangePopoverOpen) {\r\n    positionRangePopover();\r\n  }\r\n  const container = document.querySelector<HTMLElement>(\"[data-role='floating-time']\");\r\n  if (container) {\r\n    if (state.floatingPos) {\r\n      applyFloatingInlineStyle(container, state.floatingPos);\r\n    } else {\r\n      alignFloatingContainer(container);\r\n    }\r\n  }\r\n}\r\n\r\nfunction summarize(records: UsageRecord[]): SummaryResult {\r\n  const totals = {\r\n    totalTokens: 0,\r\n    totalCost: 0,\r\n    inputWithCache: 0,\r\n    inputNoCache: 0,\r\n    cacheRead: 0,\r\n    outputTokens: 0,\r\n  };\r\n\r\n  const byDay = new Map<string, { date: Date; requests: number; tokens: number; cost: number }>();\r\n\r\n  records.forEach((record) => {\r\n    totals.totalTokens += record.totalTokens;\r\n    totals.totalCost += record.cost;\r\n    totals.inputWithCache += record.inputWithCache;\r\n    totals.inputNoCache += record.inputNoCache;\r\n    totals.cacheRead += record.cacheRead;\r\n    totals.outputTokens += record.outputTokens;\r\n\r\n    const dayKey = formatDateKey(record.date);\r\n    const entry = byDay.get(dayKey);\r\n    if (entry) {\r\n      entry.requests += 1;\r\n      entry.tokens += record.totalTokens;\r\n      entry.cost += record.cost;\r\n    } else {\r\n      byDay.set(dayKey, {\r\n        date: record.date,\r\n        requests: 1,\r\n        tokens: record.totalTokens,\r\n        cost: record.cost,\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  const totalRequests = records.length;\r\n  const totalTokens = totals.totalTokens;\r\n  const totalCost = totals.totalCost;\r\n\r\n  const stats: StatCard[] = [\r\n    {\r\n      label: \"\u603B\u8C03\u7528\u6B21\u6570\",\r\n      value: formatNumber(records.length),\r\n    },\r\n    {\r\n      label: \"Total Tokens\",\r\n      value: formatNumber(totals.totalTokens),\r\n      hint: `\u5E73\u5747 ${formatNumber(records.length ? Math.round(totals.totalTokens / records.length) : 0)} / \u8C03\u7528`,\r\n    },\r\n    {\r\n      label: \"\u8F93\u5165 Tokens (\u542B\u7F13\u5B58\u5199\u5165)\",\r\n      value: formatNumber(totals.inputWithCache),\r\n    },\r\n    {\r\n      label: \"\u8F93\u5165 Tokens (\u65E0\u7F13\u5B58\u5199\u5165)\",\r\n      value: formatNumber(totals.inputNoCache),\r\n    },\r\n    {\r\n      label: \"\u7F13\u5B58\u8BFB\u53D6\",\r\n      value: formatNumber(totals.cacheRead),\r\n    },\r\n    {\r\n      label: \"\u8F93\u51FA Tokens\",\r\n      value: formatNumber(totals.outputTokens),\r\n    },\r\n    {\r\n      label: \"\u603B\u8D39\u7528 (USD)\",\r\n      value: formatCost(totals.totalCost),\r\n    },\r\n  ];\r\n\r\n  const dailyRows: DailyRow[] = Array.from(byDay.entries())\r\n    .map(([key, entry]) => ({\r\n      key,\r\n      label: key,\r\n      requests: formatNumber(entry.requests),\r\n      requestsPercentLabel: formatPercentDisplay(totalRequests ? (entry.requests / totalRequests) * 100 : 0),\r\n      requestsPercentValue: totalRequests ? (entry.requests / totalRequests) * 100 : 0,\r\n      totalTokens: formatNumber(entry.tokens),\r\n      tokensPercentLabel: formatPercentDisplay(totalTokens ? (entry.tokens / totalTokens) * 100 : 0),\r\n      tokensPercentValue: totalTokens ? (entry.tokens / totalTokens) * 100 : 0,\r\n      cost: formatCost(entry.cost),\r\n      costPercentLabel: formatPercentDisplay(totalCost ? (entry.cost / totalCost) * 100 : 0),\r\n      costPercentValue: totalCost ? (entry.cost / totalCost) * 100 : 0,\r\n    }))\r\n    .sort((a, b) => (a.key > b.key ? -1 : 1));\r\n\r\n  const modelMetrics = buildModelMetrics(records);\r\n\r\n  return {\r\n    stats,\r\n    dailyRows,\r\n    totalTokens,\r\n    totalCost,\r\n    totalRequests,\r\n    modelMetrics,\r\n  };\r\n}\r\n\r\nfunction toPlanOptions(): PlanOption[] {\r\n  return Object.entries(PLAN_CONFIG).map(([id, config]) => ({\r\n    id,\r\n    label: config.label,\r\n    description: config.description,\r\n  }));\r\n}\r\n\r\nfunction toQuickRangeView(quickRanges: QuickRanges, activeKey?: string) {\r\n  return {\r\n    days: quickRanges.days.map((item) => ({\r\n      key: item.key,\r\n      label: formatDateLabel(item.start),\r\n      active: activeKey === item.key,\r\n    })),\r\n    months: quickRanges.months.map((item) => ({\r\n      key: item.key,\r\n      label: formatMonthLabel(item.start),\r\n      active: activeKey === item.key,\r\n    })),\r\n  };\r\n}\r\n\r\nfunction toFilterValues(filter: FilterInputs) {\r\n  return {\r\n    startDate: filter.startDate ?? \"\",\r\n    startTime: filter.startTime ?? \"\",\r\n    endDate: filter.endDate ?? \"\",\r\n    endTime: filter.endTime ?? \"\",\r\n  };\r\n}\r\n\r\nfunction toDateRange(filter: FilterInputs): DateRange {\r\n  const range: DateRange = {};\r\n\r\n  if (filter.startDate) {\r\n    range.start = composeDate(filter.startDate, filter.startTime ?? \"00:00\");\r\n  }\r\n\r\n  if (filter.endDate) {\r\n    range.end = composeDate(filter.endDate, filter.endTime ?? \"23:59\");\r\n  }\r\n\r\n  return range;\r\n}\r\n\r\nfunction currentRangeLabel(range: DateRange): string {\r\n  if (!range.start && !range.end) {\r\n    return \"\u5168\u90E8\u65F6\u95F4\";\r\n  }\r\n  if (range.start && range.end) {\r\n    return `${toDateInput(range.start)} ${toTimeInput(range.start)} \u2192 ${toDateInput(range.end)} ${toTimeInput(range.end)}`;\r\n    }\r\n  if (range.start) {\r\n    return `${toDateInput(range.start)} ${toTimeInput(range.start)} \u2192 \u73B0\u5728`;\r\n  }\r\n  return `\u81F3 ${toDateInput(range.end as Date)} ${toTimeInput(range.end as Date)}`;\r\n}\r\n\r\nfunction applyPresetRange(key?: string): void {\r\n  const now = new Date();\r\n  let start: Date | undefined;\r\n  let end: Date | undefined;\r\n  switch (key) {\r\n    case \"last-24h\":\r\n      end = now;\r\n      start = new Date(now.getTime() - 24 * 60 * 60 * 1000);\r\n      break;\r\n    case \"last-3d\":\r\n      end = now;\r\n      start = new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000);\r\n      break;\r\n    case \"last-7d\":\r\n      end = now;\r\n      start = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n      break;\r\n    case \"last-30d\":\r\n      end = now;\r\n      start = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n      break;\r\n    case \"this-month\": {\r\n      const s = new Date(now.getFullYear(), now.getMonth(), 1, 0, 0, 0, 0);\r\n      start = s;\r\n      end = now;\r\n      break;\r\n    }\r\n    case \"prev-month\": {\r\n      const firstThisMonth = new Date(now.getFullYear(), now.getMonth(), 1, 0, 0, 0, 0);\r\n      const startPrev = new Date(firstThisMonth);\r\n      startPrev.setMonth(startPrev.getMonth() - 1);\r\n      const endPrev = new Date(firstThisMonth.getTime() - 1);\r\n      start = startPrev;\r\n      end = endPrev;\r\n      break;\r\n    }\r\n    default:\r\n      return;\r\n  }\r\n  state.filter = {\r\n    startDate: toDateInput(start as Date),\r\n    startTime: toTimeInput(start as Date),\r\n    endDate: toDateInput(end as Date),\r\n    endTime: toTimeInput(end as Date),\r\n  };\r\n  state.activeQuickRangeKey = undefined;\r\n  state.rangePopoverOpen = false;\r\n  render();\r\n}\r\nfunction composeDate(datePart: string, timePart: string): Date {\r\n  const [year, month, day] = datePart.split(\"-\").map((value) => Number(value));\r\n  const [hour, minute] = timePart.split(\":\").map((value) => Number(value));\r\n  return new Date(year, month - 1, day, hour || 0, minute || 0, 0, 0);\r\n}\r\n\r\nfunction toDateInput(date: Date): string {\r\n  return [\r\n    date.getFullYear(),\r\n    pad(date.getMonth() + 1),\r\n    pad(date.getDate()),\r\n  ].join(\"-\");\r\n}\r\n\r\nfunction toTimeInput(date: Date): string {\r\n  return [pad(date.getHours()), pad(date.getMinutes())].join(\":\");\r\n}\r\n\r\nfunction collectModels(records: UsageRecord[]): string[] {\r\n  const seen = new Set<string>();\r\n  records.forEach((record) => {\r\n    seen.add(record.model ?? \"\");\r\n  });\r\n  return Array.from(seen).sort((a, b) =>\r\n    formatModelLabel(a).localeCompare(formatModelLabel(b), \"zh-CN\"),\r\n  );\r\n}\r\n\r\nfunction applyModelFilter(records: UsageRecord[], selected: string[]): UsageRecord[] {\r\n  if (!selected.length) {\r\n    return records;\r\n  }\r\n  const selectedSet = new Set(selected);\r\n  return records.filter((record) => selectedSet.has(record.model ?? \"\"));\r\n}\r\n\r\nfunction buildModelMetrics(records: UsageRecord[]): ModelMetric[] {\r\n  const byModel = new Map<string, { requests: number; tokens: number; cost: number }>();\r\n  records.forEach((record) => {\r\n    const key = record.model ?? \"\";\r\n    const entry = byModel.get(key);\r\n    if (entry) {\r\n      entry.requests += 1;\r\n      entry.tokens += record.totalTokens;\r\n      entry.cost += record.cost;\r\n    } else {\r\n      byModel.set(key, {\r\n        requests: 1,\r\n        tokens: record.totalTokens,\r\n        cost: record.cost,\r\n      });\r\n    }\r\n  });\r\n  return Array.from(byModel.entries())\r\n    .map(([model, entry]) => ({\r\n      model,\r\n      requests: entry.requests,\r\n      tokens: entry.tokens,\r\n      cost: entry.cost,\r\n    }))\r\n    .sort((a, b) => b.tokens - a.tokens);\r\n}\r\n\r\nfunction buildModelColorMap(models: string[]): Map<string, string> {\r\n  const map = new Map<string, string>();\r\n  models.forEach((model, index) => {\r\n    map.set(model ?? \"\", generateModelColor(index));\r\n  });\r\n  return map;\r\n}\r\n\r\nfunction buildModelChips(\r\n  models: string[],\r\n  selected: string[],\r\n  colorMap: Map<string, string>,\r\n): ModelChip[] {\r\n  if (!models.length) {\r\n    return [];\r\n  }\r\n  const baseline = selected.length ? selected : models;\r\n  const selectedSet = new Set(baseline);\r\n  return models.map((model) => ({\r\n    value: model,\r\n    label: formatModelLabel(model),\r\n    active: selectedSet.has(model),\r\n    color: getModelColor(model, colorMap),\r\n  }));\r\n}\r\n\r\nfunction buildModelLegend(metrics: ModelMetric[], colorMap: Map<string, string>): ModelLegendItem[] {\r\n  const unique = new Map<string, ModelLegendItem>();\r\n  metrics.forEach((metric) => {\r\n    unique.set(metric.model, {\r\n      label: formatModelLabel(metric.model),\r\n      color: getModelColor(metric.model, colorMap),\r\n    });\r\n  });\r\n  return Array.from(unique.values());\r\n}\r\n\r\nfunction buildModelChartMetrics(\r\n  summary: SummaryResult,\r\n  colorMap: Map<string, string>,\r\n): ModelChartMetric[] {\r\n  const definitions: Array<{\r\n    key: string;\r\n    label: string;\r\n    total: number;\r\n    getter: (metric: ModelMetric) => number;\r\n    formatter: (value: number) => string;\r\n  }> = [\r\n    {\r\n      key: \"requests\",\r\n      label: \"\u8C03\u7528\u6B21\u6570\u5360\u6BD4\",\r\n      total: summary.totalRequests,\r\n      getter: (metric) => metric.requests,\r\n      formatter: (value) => formatNumber(value),\r\n    },\r\n    {\r\n      key: \"tokens\",\r\n      label: \"Total Tokens \u5360\u6BD4\",\r\n      total: summary.totalTokens,\r\n      getter: (metric) => metric.tokens,\r\n      formatter: (value) => formatNumber(value),\r\n    },\r\n    {\r\n      key: \"cost\",\r\n      label: \"\u8D39\u7528\u5360\u6BD4 (USD)\",\r\n      total: summary.totalCost,\r\n      getter: (metric) => metric.cost,\r\n      formatter: (value) => formatCost(value),\r\n    },\r\n  ];\r\n\r\n  return definitions.map((definition) => {\r\n    const { total, getter, formatter } = definition;\r\n    const segments = summary.modelMetrics\r\n      .map((metric) => {\r\n        const rawValue = getter(metric);\r\n        const percentValue = total > 0 ? (rawValue / total) * 100 : 0;\r\n        return {\r\n          label: formatModelLabel(metric.model),\r\n          percentLabel: formatPercentDisplay(percentValue),\r\n          percentValue,\r\n          color: getModelColor(metric.model, colorMap),\r\n          valueLabel: formatter(rawValue),\r\n        };\r\n      })\r\n      .filter((segment) => segment.percentValue > 0);\r\n\r\n    const gradient = buildPieGradient(segments);\r\n\r\n    return {\r\n      key: definition.key,\r\n      label: definition.label,\r\n      totalLabel: formatter(total),\r\n      empty: total === 0 || segments.length === 0,\r\n      segments,\r\n      gradient,\r\n    };\r\n  });\r\n}\r\n\r\nfunction defaultSelectedModels(models: string[]): string[] {\r\n  if (!models.length) {\r\n    return [];\r\n  }\r\n  const paidModels = models.filter(\r\n    (model) => model && model.trim().toLowerCase() !== \"auto\",\r\n  );\r\n  if (paidModels.length) {\r\n    return paidModels;\r\n  }\r\n  return [...models];\r\n}\r\n\r\nfunction getModelColor(model: string, colorMap: Map<string, string>): string {\r\n  if (colorMap.has(model)) {\r\n    return colorMap.get(model)!;\r\n  }\r\n  return colorFromString(model);\r\n}\r\n\r\nfunction generateModelColor(index: number): string {\r\n  const hue = (index * 67) % 360;\r\n  return `hsl(${hue}, 70%, 60%)`;\r\n}\r\n\r\nfunction colorFromString(value: string): string {\r\n  let hash = 0;\r\n  for (let i = 0; i < value.length; i += 1) {\r\n    hash = value.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n  const hue = Math.abs(hash) % 360;\r\n  return `hsl(${hue}, 70%, 60%)`;\r\n}\r\n\r\nfunction formatModelLabel(model: string): string {\r\n  return model ? model : \"\u672A\u6807\u8BB0\u6A21\u578B\";\r\n}\r\n\r\nfunction buildPieGradient(segments: ModelChartSegment[]): string {\r\n  if (!segments.length) {\r\n    return \"conic-gradient(rgba(148, 163, 184, 0.35) 0 100%)\";\r\n  }\r\n  let current = 0;\r\n  const parts = segments.map((segment, index) => {\r\n    const start = current;\r\n    let span = segment.percentValue;\r\n    if (index === segments.length - 1) {\r\n      span = 100 - start;\r\n    }\r\n    const end = Math.min(100, start + span);\r\n    current = end;\r\n    return `${segment.color} ${start}% ${end}%`;\r\n  });\r\n  return `conic-gradient(${parts.join(\",\")})`;\r\n}\r\n\r\nfunction formatPercentLabel(percent: number): string {\r\n  return `${Math.min(100, Math.round(percent))}%`;\r\n}\r\n\r\nfunction computeUsagePercent(totalTokens: number, limit: number): number {\r\n  if (!limit) {\r\n    return 0;\r\n  }\r\n  return Math.min(100, (totalTokens / limit) * 100);\r\n}\r\n\r\nfunction usageColor(percent: number): string {\r\n  if (percent < 60) {\r\n    return \"var(--success)\";\r\n  }\r\n  if (percent < 85) {\r\n    return \"#facc15\";\r\n  }\r\n  return \"var(--danger)\";\r\n}\r\n\r\nfunction formatPercentDisplay(value: number): string {\r\n  if (value <= 0) {\r\n    return \"0%\";\r\n  }\r\n  if (value >= 100) {\r\n    return \"100%\";\r\n  }\r\n  const rounded = Math.round(value * 10) / 10;\r\n  return Number.isInteger(rounded) ? `${rounded}%` : `${rounded.toFixed(1)}%`;\r\n}\r\n\r\nfunction formatNumber(value: number): string {\r\n  return numberFormatter.format(Math.round(value));\r\n}\r\n\r\nfunction formatCost(value: number): string {\r\n  return costFormatter.format(value);\r\n}\r\n\r\nfunction formatDateKey(date: Date): string {\r\n  return [\r\n    date.getFullYear(),\r\n    pad(date.getMonth() + 1),\r\n    pad(date.getDate()),\r\n  ].join(\"-\");\r\n}\r\n\r\nfunction formatDateLabel(date: Date): string {\r\n  return [\r\n    date.getFullYear(),\r\n    pad(date.getMonth() + 1),\r\n    pad(date.getDate()),\r\n  ].join(\"-\");\r\n}\r\n\r\nfunction formatMonthLabel(date: Date): string {\r\n  return `${date.getFullYear()}-${pad(date.getMonth() + 1)}`;\r\n}\r\n\r\nfunction pad(value: number): string {\r\n  return value.toString().padStart(2, \"0\");\r\n}\r\n\r\nfunction positionRangePopover(): void {\r\n  const trigger = document.querySelector<HTMLElement>(\"[data-action='toggle-range']\");\r\n  const popover = document.querySelector<HTMLElement>(\"[data-role='range-popover']\");\r\n  if (!trigger || !popover) {\r\n    return;\r\n  }\r\n  const rect = trigger.getBoundingClientRect();\r\n  const gap = 8;\r\n  const viewportWidth = window.innerWidth;\r\n  const viewportHeight = window.innerHeight;\r\n\r\n  // \u521D\u6B65\u4F4D\u7F6E\uFF1A\u6309\u94AE\u5DE6\u5BF9\u9F50\uFF0C\u4E0B\u65B9 8px\r\n  let left = rect.left;\r\n  let top = rect.bottom + gap;\r\n\r\n  // \u4F30\u8BA1\u5F39\u5C42\u5C3A\u5BF8\uFF08\u672A\u5E03\u5C40\u65F6\u53D6\u5DF2\u6709\u5BBD\u5EA6\uFF0C\u5426\u5219\u7528\u6700\u5927\u5BBD\u5EA6\uFF09\r\n  const contentWidth = Math.min(popover.offsetWidth || 460, viewportWidth - 16);\r\n  const contentHeight = popover.offsetHeight || 320;\r\n\r\n  // \u53F3\u4FA7\u6EA2\u51FA\u65F6\u5411\u5DE6\u6536\u655B\r\n  if (left + contentWidth > viewportWidth - 8) {\r\n    left = Math.max(8, viewportWidth - 8 - contentWidth);\r\n  }\r\n  // \u5E95\u90E8\u6EA2\u51FA\u65F6\u653E\u5230\u6309\u94AE\u4E0A\u65B9\r\n  if (top + contentHeight > viewportHeight - 8) {\r\n    const above = rect.top - gap - contentHeight;\r\n    if (above >= 8) {\r\n      top = above;\r\n    } else {\r\n      // \u4ECD\u7136\u6EA2\u51FA\uFF1A\u8D34\u8FD1\u9876\u90E8\r\n      top = 8;\r\n    }\r\n  }\r\n\r\n  popover.style.left = `${Math.round(left)}px`;\r\n  popover.style.top = `${Math.round(top)}px`;\r\n}\r\n\r\nfunction initialFloatingStyle(pos?: { left: number; top: number }): string {\r\n  if (!pos) {\r\n    return \"\"; // \u4F7F\u7528\u9ED8\u8BA4\u53F3\u4E0A\u89D2\r\n  }\r\n  return `left:${Math.round(pos.left)}px;top:${Math.round(pos.top)}px;right:auto;`;\r\n}\r\n\r\nfunction alignFloatingContainer(container: HTMLElement): void {\r\n  const app = document.getElementById(\"app\");\r\n  if (!app) {\r\n    return;\r\n  }\r\n  const rect = app.getBoundingClientRect();\r\n  const offsetRight = Math.max(12, window.innerWidth - rect.right + 24);\r\n  container.style.left = \"auto\";\r\n  container.style.right = `${Math.round(offsetRight)}px`;\r\n  container.style.top = \"12px\";\r\n}\r\n\r\nfunction handleResizeForFloating(): void {\r\n  if (state.floatingPos) {\r\n    return;\r\n  }\r\n  const container = document.querySelector<HTMLElement>(\"[data-role='floating-time']\");\r\n  if (container) {\r\n    alignFloatingContainer(container);\r\n  }\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": ["formatDateKey", "pad"]
}
